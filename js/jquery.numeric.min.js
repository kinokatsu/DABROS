(function(a){a.fn.numeric=function(b,c){if(typeof b==="boolean")b={decimal:b};b=b||{};if(typeof b.negative=="undefined")b.negative=true;var e=b.decimal===false?"":b.decimal||".",d=b.negative===true?true:false;c=typeof c=="function"?c:function(){};return this.data("numeric.decimal",e).data("numeric.negative",d).data("numeric.callback",c).keypress(a.fn.numeric.keypress).keyup(a.fn.numeric.keyup).blur(a.fn.numeric.blur)};a.fn.numeric.keypress=function(c){var e=a.data(this,"numeric.decimal"),g=a.data(this,"numeric.negative"),b=c.charCode?c.charCode:c.keyCode?c.keyCode:0;if(b==13&&this.nodeName.toLowerCase()=="input")return true;else if(b==13)return false;var d=false;if(c.ctrlKey&&b==97||c.ctrlKey&&b==65)return true;if(c.ctrlKey&&b==120||c.ctrlKey&&b==88)return true;if(c.ctrlKey&&b==99||c.ctrlKey&&b==67)return true;if(c.ctrlKey&&b==122||c.ctrlKey&&b==90)return true;if(c.ctrlKey&&b==118||c.ctrlKey&&b==86||c.shiftKey&&b==45)return true;if(b<48||b>57){var f=a(this).val();if(a.inArray("-",f.split(""))!==0&&g&&b==45&&(f.length===0||parseInt(a.fn.getSelectionStart(this),10)===0))return true;if(e&&b==e.charCodeAt(0)&&a.inArray(e,f.split(""))!=-1)d=false;if(b!=8&&b!=9&&b!=13&&b!=35&&b!=36&&b!=37&&b!=39&&b!=46)d=false;else if(typeof c.charCode!="undefined")if(c.keyCode==c.which&&c.which!==0){d=true;if(c.which==46)d=false}else if(c.keyCode!==0&&c.charCode===0&&c.which===0)d=true;if(e&&b==e.charCodeAt(0))if(a.inArray(e,f.split(""))==-1)d=true;else d=false}else d=true;return d};a.fn.numeric.keyup=function(){var b=a(this).val();if(b&&b.length>0){var h=a.fn.getSelectionStart(this),g=a.fn.getSelectionEnd(this),d=a.data(this,"numeric.decimal"),o=a.data(this,"numeric.negative");if(d!==""&&d!==null){var n=a.inArray(d,b.split(""));if(n===0){this.value="0"+b;h++;g++}if(n==1&&b.charAt(0)=="-"){this.value="-0"+b.substring(1);h++;g++}b=this.value}for(var k=[0,1,2,3,4,5,6,7,8,9,"-",d],m=b.length,c=m-1;c>=0;c--){var f=b.charAt(c);if(c!==0&&f=="-")b=b.substring(0,c)+b.substring(c+1);else if(c===0&&!o&&f=="-")b=b.substring(1);for(var l=false,i=0;i<k.length;i++)if(f==k[i]){l=true;break}if(!l||f==" ")b=b.substring(0,c)+b.substring(c+1)}var j=a.inArray(d,b.split(""));if(j>0)for(var e=m-1;e>j;e--){var p=b.charAt(e);if(p==d)b=b.substring(0,e)+b.substring(e+1)}this.value=b;a.fn.setSelection(this,[h,g])}};a.fn.numeric.blur=function(){var d=a.data(this,"numeric.decimal"),c=a.data(this,"numeric.callback"),b=this.value;if(b!==""){var e=new RegExp("^\\d+$|^\\d*"+d+"\\d+$");!e.exec(b)&&c.apply(this)}};a.fn.removeNumeric=function(){return this.data("numeric.decimal",null).data("numeric.negative",null).data("numeric.callback",null).unbind("keypress",a.fn.numeric.keypress).unbind("blur",a.fn.numeric.blur)};a.fn.getSelectionStart=function(a){if(a.type==="number")return undefined;else if(a.createTextRange){var b;if(typeof document.selection=="undefined")b=document.getSelection();else{b=document.selection.createRange().duplicate();b.moveEnd("character",a.value.length)}return b.text==""?a.value.length:a.value.lastIndexOf(b.text)}else try{return a.selectionStart}catch(c){return 0}};a.fn.getSelectionEnd=function(a){if(a.type==="number")return undefined;else if(a.createTextRange){var b=document.selection.createRange().duplicate();b.moveStart("character",-a.value.length);return b.text.length}else return a.selectionEnd};a.fn.setSelection=function(b,a){if(typeof a=="number")a=[a,a];if(a&&a.constructor==Array&&a.length==2)if(b.type==="number")b.focus();else if(b.createTextRange){var c=b.createTextRange();c.collapse(true);c.moveStart("character",a[0]);c.moveEnd("character",a[1]);c.select()}else{b.focus();try{b.setSelectionRange&&b.setSelectionRange(a[0],a[1])}catch(d){}}}})(jQuery)